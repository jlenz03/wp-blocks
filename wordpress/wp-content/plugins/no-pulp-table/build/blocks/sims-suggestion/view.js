(()=>{"use strict";var e={338:(e,t,a)=>{var n=a(795);t.H=n.createRoot,n.hydrateRoot},795:e=>{e.exports=window.ReactDOM}},t={};function a(n){var s=t[n];if(void 0!==s)return s.exports;var l=t[n]={exports:{}};return e[n](l,l.exports,a),l.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{const e=window.React;var t=a.n(e),n=a(338);class s extends t().Component{state={title:"",description:"",type_of_pack:"",concept_art:""};addReview(e){var t,a;e.preventDefault();const n={title:this.state.title,content:this.state.description,acf:{type_of_pack:null!==(t=this.state.type_of_pack)&&void 0!==t?t:"Expansion",concept_art:null!==(a=this.state.concept_art)&&void 0!==a?a:"/"},status:"publish"};this.props.addReview?.(n)}render(){return(0,e.createElement)("form",{className:"new-pack-form",onSubmit:e=>this.addReview(e)},(0,e.createElement)("div",null,(0,e.createElement)("div",{className:"title-with-image"},(0,e.createElement)("h2",null,"Suggest the Next Sims Pack")),(0,e.createElement)("div",{className:"form-description"},(0,e.createElement)("p",null,"We appreciate our user's suggestions and always want to develop with YOU guys in mind! Write suggestions below of what you want to see next!")),(0,e.createElement)("label",null,"Title:",(0,e.createElement)("input",{type:"text",value:this.state.title,onInput:e=>this.setState({title:e.target.value})}))),(0,e.createElement)("div",null,(0,e.createElement)("label",null,"Type of Sims Pack:",(0,e.createElement)("input",{type:"text",value:this.state.type_of_pack,onInput:e=>this.setState({type_of_pack:e.target.value})}))),(0,e.createElement)("div",null,(0,e.createElement)("label",null,"Concept Art URL",(0,e.createElement)("input",{type:"text",value:this.state.concept_art,onInput:e=>this.setState({concept_art:e.target.value})}))),(0,e.createElement)("div",null,(0,e.createElement)("label",null,"Description of Pack",(0,e.createElement)("textarea",{value:this.state.description,onInput:e=>this.setState({description:e.target.value})}))),(0,e.createElement)("button",{type:"submit"},"Add Sims Pack Suggestion"))}}class l extends t().Component{handleVote=e=>{this.props.handleVote(this.props.id,e)};render(){const{title:t,description:a,type_of_pack:n,concept_art:s,vote_4_pack:l}=this.props;return(0,e.createElement)("div",{className:"pack-card"},(0,e.createElement)("div",{className:"pack-content"},(0,e.createElement)("div",{className:"pack-text"},(0,e.createElement)("div",{className:"pack-title",dangerouslySetInnerHTML:{__html:t}}),(0,e.createElement)("div",{className:"type-pack",dangerouslySetInnerHTML:{__html:n}}),(0,e.createElement)("div",{className:"pack-description",dangerouslySetInnerHTML:{__html:a}}),(0,e.createElement)("div",{className:"vote"},(0,e.createElement)("button",{onClick:()=>this.handleVote("up")},(0,e.createElement)("span",{role:"img","aria-label":"Vote Up"},"➕")),(0,e.createElement)("h3",null,l),(0,e.createElement)("button",{onClick:()=>this.handleVote("down")},(0,e.createElement)("span",{role:"img","aria-label":"Vote Down"},"➖")))),(0,e.createElement)("div",{className:"concept-art"},(0,e.createElement)("img",{src:s,alt:"Concept Art"}))))}}class o extends t().Component{constructor(e){super(e),this.state={votes:{}}}handleVote=(e,t)=>{console.log("Voting for suggestion with ID:",e),console.log("Vote type:",t),this.setState((a=>({votes:{...a.votes,[e]:"up"===t?(a.votes[e]||0)+1:(a.votes[e]||0)-1}})),(()=>{console.log("Votes after update:",this.state.votes)}))};render(){return(0,e.createElement)("div",{className:"pack-list"},this.props.sim.map((t=>(0,e.createElement)(l,{key:t.id,title:t.attributes.title.rendered,description:t.attributes.content.rendered,type_of_pack:t.attributes.acf.type_of_pack,concept_art:t.attributes.acf.concept_art,vote_4_pack:t.attributes.acf.vote_4_pack,handleVote:this.handleVote}))))}}class r extends t().Component{state={sim:[],loggedIn:null};addReview(e){new wp.api.models.Sim(e).save().done((e=>{console.log("saved!",e),this.getReviews()})).fail((e=>{console.error("failed!",e)}))}getReviews(){const e=new wp.api.collections.Sim;e.fetch().done((t=>{console.log("packs!!",t,e),this.setState({sim:e.models})})).fail((e=>{this.getReviews()}))}getLoggedInUser(){(new wp.api.models.UsersMe).fetch().done((e=>{this.setState({loggedIn:!0})})).fail((e=>{this.setState({loggedIn:!1})}))}componentDidMount(){this.getReviews(),this.getLoggedInUser()}render(){const{sim:t,loggedIn:a}=this.state;return(0,e.createElement)("div",null,(0,e.createElement)("h3",null,"Latest Sims Suggestions"),t.length>0&&(0,e.createElement)(o,{sim:t}),(0,e.createElement)("hr",null),!0===a&&(0,e.createElement)(s,{addReview:e=>this.addReview(e)}),!1===a&&(0,e.createElement)(s,{addReview:e=>this.addReview(e)}))}}document.querySelectorAll(".wp-block-jl-sims-suggestion").forEach((t=>{(0,n.H)(t).render((0,e.createElement)(r,null))}))})()})();